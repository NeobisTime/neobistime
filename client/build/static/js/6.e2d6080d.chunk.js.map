{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","images/pages/authentication.svg","images/pages/password_eye.svg","components/pages/auth/auth.tsx","components/pages/auth/index.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","module","exports","Authorization","props","useState","email","setEmail","password","setPassword","hidden1","setHidden1","emailError","errors","setErrors","validate","test","event","a","preventDefault","data","API","postAuthData","answer","status","token","getCookie","requestDataToPush","getRole","then","is_staff","document","cookie","history","window","location","reload","className","onSubmit","htmlFor","type","name","required","onChange","onBlur","style","height","minLength","onClick","src","eye","alt","to","designPhoto"],"mappings":"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","file":"static/js/6.e2d6080d.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","module.exports = __webpack_public_path__ + \"static/media/authentication.3c0df457.svg\";","module.exports = __webpack_public_path__ + \"static/media/password_eye.66ec5002.svg\";","import React, { useState } from \"react\";\r\nimport designPhoto from \"../../../images/pages/authentication.svg\";\r\nimport \"../../../styles/pages/_auth.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport eye from \"../../../images/pages/password_eye.svg\";\r\nimport API, { getCookie } from \"../../../API\";\r\n\r\nconst Authorization: React.FC = (props: any) => {\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const [hidden1, setHidden1] = useState<boolean>(true);\r\n\r\n  const handleChangeEmail = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(event.target.value);\r\n    validate();\r\n  };\r\n\r\n  const handleChangePassword = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setPassword(event.target.value);\r\n  };\r\n  // validate\r\n  const [errors, setErrors] = useState({\r\n    emailError: \"\",\r\n  });\r\n  const validate = () => {\r\n    const errors = {\r\n      emailError: \"\",\r\n    };\r\n    if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email)) {\r\n      setErrors({ ...errors, emailError: \"Неправильный email\" });\r\n    } else {\r\n      setErrors({ ...errors, emailError: \"\" });\r\n    }\r\n    return errors;\r\n  };\r\n\r\n  async function handleSubmit(event: any) {\r\n    event.preventDefault();\r\n    const data = { email, password };\r\n    validate();\r\n\r\n    let answer = await API.postAuthData(data);\r\n    if (answer.status >= 200 && answer.status <= 299) {\r\n      let token: string = getCookie(\"XSRF-Token\") || \"\";\r\n      let requestDataToPush: any = {\r\n        token,\r\n      };\r\n      await API.getRole(requestDataToPush).then((data: any) => {\r\n        if (data.data.is_staff) {\r\n          document.cookie = `role =admin`;\r\n        } else {\r\n          document.cookie = `role =user`;\r\n        }\r\n      });\r\n      props.history.push(\"/\");\r\n      window.location.reload(true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <div className=\"auth__content\">\r\n        <div className=\"auth__title\">\r\n          <p className=\"auth__title-text\">Добро пожаловать в Neobis Time</p>\r\n          <p className=\"auth__title-description\">Войдите, чтобы продолжить</p>\r\n        </div>\r\n        <section className=\"auth__section\">\r\n          <form className=\"auth__form\" onSubmit={handleSubmit}>\r\n            <label className=\"auth__label\" htmlFor=\"email\">\r\n              E-mail\r\n            </label>\r\n            <input\r\n              className=\"auth__input\"\r\n              type=\"text\"\r\n              name=\"email\"\r\n              required\r\n              value={email}\r\n              onChange={handleChangeEmail}\r\n              onBlur={validate}\r\n            />\r\n            {errors && <div className=\"error__span\">{errors.emailError}</div>}\r\n\r\n            <label className=\"auth__label\" htmlFor=\"password\">\r\n              Пароль\r\n            </label>\r\n            <div className=\"registration__password\" style={{ height: \"43px\" }}>\r\n              <input\r\n                className=\"registration__password-input\"\r\n                type={hidden1 ? \"password\" : \"text\"}\r\n                minLength={8}\r\n                name=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={handleChangePassword}\r\n              />\r\n              <img\r\n                onClick={() => {\r\n                  setHidden1(!hidden1);\r\n                }}\r\n                src={eye}\r\n                alt=\"eye\"\r\n                className=\"registration__password-image\"\r\n              />\r\n            </div>\r\n            <div className=\"auth__text_position\">\r\n              <span className=\"auth__text_small_grey\">Забыли пароль?</span>\r\n              <Link to=\"/recovery_password\">\r\n                <span className=\"auth__text_small_green\">Восстановить</span>\r\n              </Link>\r\n            </div>\r\n            <div className=\"auth__text_position auth__text_position_last\">\r\n              <button className=\"auth__submit\" type=\"submit\">\r\n                Войти\r\n              </button>\r\n              <span className=\"auth__text_small_grey auth__text_small_grey_last\">\r\n                Еще нет аккаунта?\r\n              </span>\r\n              <Link to=\"/registration\">\r\n                <span className=\"auth__text_small_green auth__text_small_green_last\">\r\n                  Зарегистрироваться\r\n                </span>\r\n              </Link>\r\n            </div>\r\n          </form>\r\n        </section>\r\n        <section className=\"auth__section\">\r\n          <img\r\n            src={designPhoto}\r\n            className=\"auth__image\"\r\n            alt=\"girl introducin login\"\r\n          />\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Authorization;\r\n","import Authorization from \"./auth.tsx\";\r\n\r\nexport default Authorization;\r\n"],"sourceRoot":""}