(this.webpackJsonpneobis_time=this.webpackJsonpneobis_time||[]).push([[7],{278:function(e,t,a){e.exports=a.p+"static/media/all_events.4121eeec.svg"},279:function(e,t,a){e.exports=a.p+"static/media/comed_events.1f152545.svg"},280:function(e,t,a){e.exports=a.p+"static/media/missed_events.6c6faf4d.svg"},281:function(e,t,a){e.exports=a.p+"static/media/personal_achievment_1.b3f45b02.svg"},282:function(e,t,a){e.exports=a.p+"static/media/personal_achievment_2.df06140c.svg"},283:function(e,t,a){e.exports=a.p+"static/media/personal_achievment_3.b0eaf699.svg"},284:function(e,t,a){e.exports=a.p+"static/media/edit_pencil_neobis_color.c80f9e1b.svg"},316:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(1),o=a.n(s),c=a(40),l=a(5),i=a(15),r=a.n(i),m=a(19),f=a(38),p=a(6),_=a(56),u=a.n(_),d=(a(78),a(59)),b=a(57),v=a.n(b),E=a(58),N=a.n(E),g=function(e){var t=Object(s.useState)(""),a=Object(n.a)(t,2),c=a[0],l=a[1],i=Object(s.useState)(""),_=Object(n.a)(i,2),b=_[0],E=_[1],g=Object(s.useState)(e.date),h=Object(n.a)(g,2),y=h[0],O=h[1],j=Object(s.useState)(0),C=Object(n.a)(j,2),k=C[0],x=C[1],w=Object(s.useState)(0),S=Object(n.a)(w,2),M=S[0],D=S[1],B=Object(s.useState)(e.date),q=Object(n.a)(B,2),H=q[0],I=q[1],L=Object(s.useState)(0),T=Object(n.a)(L,2),A=T[0],G=T[1],F=Object(s.useState)(0),z=Object(n.a)(F,2),P=z[0],R=z[1];var J=function(){var e=new Date(y);return e.setHours(k,M,0),"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate(),"T").concat(e.getHours(),":").concat(e.getMinutes())},W=function(){var e=new Date(H);return e.setHours(A,P,0),"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate(),"T").concat(e.getHours(),":").concat(e.getMinutes())};function Y(){return(Y=Object(m.a)(r.a.mark((function t(a){var n,s,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,J();case 3:return n=t.sent,t.next=6,W();case 6:s=t.sent,o={title:c,description:b,start:n,end:s},p.a.postNoteCreateData(o).then((function(t){e.OpenAlert(t)})).catch((function(t){e.OpenAlert(t.request)}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o.a.createElement("div",{className:"modal_centered"},o.a.createElement("div",{className:"modal__wrapper"},o.a.createElement(f.a,{onClose:e.onClose}),o.a.createElement("div",{className:"personal-create"},o.a.createElement("div",{className:"personal-create-row"},o.a.createElement("input",{className:"personal-create__input",type:"text",name:"name",required:!0,value:c,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){l(e.target.value)}})),o.a.createElement("div",{className:"admin-create-event-modal-row"},o.a.createElement("img",{src:v.a,className:"admin-create-event-modal-icon",alt:"time"}),o.a.createElement("div",{className:"admin-create-event-modal__day-picker"},o.a.createElement(u.a,{value:e.date,onDayChange:function(e){O(e),I(e)},format:"dd/MM",formatDate:function(e,t,a){return Object(d.a)(e,t,{locale:a})}})),o.a.createElement("div",{className:"admin-create-event-modal-time"},o.a.createElement("input",{type:"text",name:"",placeholder:"00",maxLength:2,className:"admin-create-event-modal__time-picker",onChange:function(e){x(parseInt(e.target.value))}}),o.a.createElement("div",{className:"admin-create-event-modal__time-picker-colon"},":"),o.a.createElement("input",{type:"text",maxLength:2,name:"",placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){D(parseInt(e.target.value))}}),"\xa0-\xa0",o.a.createElement("input",{type:"text",name:"",maxLength:2,placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){G(parseInt(e.target.value))}}),o.a.createElement("div",{className:"admin-create-event-modal__time-picker-colon"},":"),o.a.createElement("input",{type:"text",name:"",maxLength:2,placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){R(parseInt(e.target.value))}}))),o.a.createElement("div",{className:"personal-create-row"},o.a.createElement("div",{className:"personal-create__textarea-wrapper"},o.a.createElement("img",{src:N.a,className:"admin-create-event-modal-icon",alt:"people"}),o.a.createElement("input",{name:"description",required:!0,value:b,onChange:function(e){E(e.target.value)},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",className:"personal-create__textarea"}))),o.a.createElement("div",{className:"personal-create-row event-info-modal__admin-buttons-wrapper"},o.a.createElement("div",{className:"personal-create__buttons-wrapper"},o.a.createElement("button",{onClick:function(e){return Y.apply(this,arguments)},className:"personal-create__buttons-save button"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),o.a.createElement("button",{onClick:e.onClose,className:"personal-create__buttons-cancel button"},"\u043e\u0442\u043c\u0435\u043d\u0430"))))))},h=function(e){var t=e.event,a=new Date(t.start);return o.a.createElement("div",{className:"modal_centered"},o.a.createElement("div",{className:"modal__wrapper"},o.a.createElement("div",{className:"event-info-modal"},o.a.createElement(f.a,{onClose:e.onClose}),o.a.createElement("div",{className:"event-info__content",style:{width:"90%"}},o.a.createElement("p",{className:"event-info__content-title",style:{fontSize:"24px"}},t.title),o.a.createElement("p",{className:"event-info__content-date",style:{fontSize:"14px"}},(a.getHours()<10?"0":"")+a.getHours(),".",(a.getMinutes()<10?"0":"")+a.getMinutes()," ",["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][a.getDay()],", ",["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","C\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][a.getMonth()]," ",a.getDate()),o.a.createElement("p",{className:"event-info__content-description",style:{fontSize:"18px"}},t.description),o.a.createElement("button",{onClick:function(){p.a.deleteNote(t.id).then((function(t){e.OpenAlert(t)})).catch((function(t){e.OpenAlert(t.request)}))},className:"personal-create__buttons-delete button"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))))},y=a(36),O=a(17),j=a(24),C=a.n(j),k=a(278),x=a.n(k),w=a(279),S=a.n(w),M=a(280),D=a.n(M),B=a(281),q=a.n(B),H=a(282),I=a.n(H),L=a(283),T=a.n(L),A=a(284),G=a.n(A),F=a(156),z=a(60),P=a(51),R=a(25),J=a(52),W=a(53),Y=a(54),U=a(55),V=a(14);t.default=Object(V.a)((function(e){var t=Object(s.useState)({}),a=Object(n.a)(t,2),i=a[0],r=a[1],m=Object(s.useState)([]),f=Object(n.a)(m,2),_=f[0],u=f[1];console.log("PersonalOffice -> serverEvents",_);var d=Object(s.useState)([]),b=Object(n.a)(d,2),v=b[0],E=b[1];console.log("PersonalOffice -> publicEvents",v);var N=Object(s.useState)(new Date),j=Object(n.a)(N,2),k=j[0],w=j[1],M=Object(s.useState)("week"),B=Object(n.a)(M,2),H=B[0],L=B[1],A=Object(s.useState)([]),V=Object(n.a)(A,2),K=V[0],Q=V[1],X=Object(s.useState)({}),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.useState)({}),ae=Object(n.a)(te,2),ne=(ae[0],ae[1]);Object(s.useEffect)((function(){p.a.getPersonalStats(H).then((function(e){Q(e.data)}))}),[H]),Object(s.useEffect)((function(){p.a.getUserInfo().then((function(t){ee(t.data);var a=e.departments.filter((function(e){return+e.value===+t.data.department_id}));ne(a[0])})),document.getElementsByClassName("fc-today-button")[0].innerHTML="\u0421\u0435\u0433\u043e\u0434\u043d\u044f",document.getElementsByClassName("fc-dayGridMonth-button")[0].innerHTML="\u041c\u0435\u0441\u044f\u0446",document.getElementsByClassName("fc-timeGridWeek-button")[0].innerHTML="\u041d\u0435\u0434\u0435\u043b\u044f",document.getElementsByClassName("fc-timeGridDay-button")[0].innerHTML="\u0414\u0435\u043d\u044c",document.getElementsByClassName("fc-listMonth-button")[0].innerHTML="\u041b\u0438\u0441\u0442"}),[]),Object(s.useEffect)((function(){document.getElementsByClassName("personal-office__stat")[0].style.display="none"}),[]);var se={datasets:[{data:[K.quantity_of_attended_events||0,0==K.quantity_of_missed_events?0:K.quantity_of_missed_events,0==K.quantity_of_missed_events&&0==K.quantity_of_attended_events?1:0],backgroundColor:["#FFCE56","#EC4C47","grey"]}],labels:["\u041f\u043e\u0441\u0435\u0449\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439","\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439","\u043f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u043e"],legend:{display:!1},options:{legend:{display:!1}}};Object(s.useEffect)((function(){p.a.getNotes().then((function(e){u(e.data)})),p.a.getPublicChoosenNotes().then((function(e){E(e.data)}))}),[]);var oe=Object(s.useState)(!1),ce=Object(n.a)(oe,2),le=ce[0],ie=ce[1],re=function(e){var t=_.find((function(t){return t.id===Number(e.oldEvent._def.publicId)}))||{id:"",start:"",end:""};t.start=e.event.startStr,t.end=e.event.endStr;var a={start:t.start,end:t.end};p.a.patchNoteChangeData(a,t.id).then((function(e){we(e)})).catch((function(e){we(e.request)}))},me=Object(s.useState)(!1),fe=Object(n.a)(me,2),pe=fe[0],_e=fe[1],ue=function(){_e(!pe),de()},de=function(){p.a.getNotes().then((function(e){u(e.data)}))},be=Object(s.useState)("success"),ve=Object(n.a)(be,2),Ee=ve[0],Ne=ve[1],ge=Object(s.useState)(""),he=Object(n.a)(ge,2),ye=he[0],Oe=he[1],je=Object(s.useState)(!1),Ce=Object(n.a)(je,2),ke=Ce[0],xe=Ce[1],we=function(e){e.status>=200&&e.status<=299?(Ne("success"),Oe("\u0412\u0441\u0435 \u043f\u0440\u043e\u0448\u043b\u043e \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a")):(Ne("error"),Oe(e.response||"\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430")),xe(!0),setTimeout((function(){xe(!1)}),5e3)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"wrapper"},o.a.createElement(c.a,null),o.a.createElement("div",{className:" content__wrapper content__wrapper_no_margin personal-office"},o.a.createElement(O.a,{timeOut:600}),o.a.createElement("section",{className:"personal-office__info"},o.a.createElement("div",{className:"personal-office__info-picture-block"},o.a.createElement("img",{className:"personal-office__info-avatar",src:$.profile_img||C.a,alt:"personal"})),o.a.createElement("div",{className:"personal-office__info-content-wrapper"},o.a.createElement("div",{className:"personal-office__info-section"},o.a.createElement("p",{className:"personal-office__info-name"},$.name_surname),o.a.createElement("p",{className:"personal-office__info-text"},"E-mail: \xa0",o.a.createElement("span",{className:"personal-office__info-text-content"},$.email)),o.a.createElement("p",{className:"personal-office__info-text"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: \xa0",o.a.createElement("span",{className:"personal-office__info-text-content"},$.phone)),o.a.createElement(l.b,{to:"/change_personal_data",className:"link"},o.a.createElement("button",{className:"button personal-office__info-edit"},o.a.createElement("img",{src:G.a,alt:"pencil",className:"personal-office__info-edit-image"}),"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))),o.a.createElement("div",{className:"personal-office__info-points"},o.a.createElement("div",{className:"personal-office__info-points-container"},o.a.createElement("p",{className:"personal-office__info-points-value"},$.points)),$.points&&$.points>=100?o.a.createElement("div",{className:"personal-office__info-points-achievements"},o.a.createElement("div",{className:"personal-office__info-points-achievements-images"},$.points&&$.points>=100?o.a.createElement("img",{className:"personal-office__info-points-achievements-image",src:q.a,alt:"achievement"}):null,$.points&&$.points>=250?o.a.createElement("img",{className:"personal-office__info-points-achievements-image",src:I.a,alt:"achievement"}):null,$.points&&$.points>=500?o.a.createElement("img",{className:"personal-office__info-points-achievements-image",src:T.a,alt:"achievement"}):null),o.a.createElement("div",{className:"personal-office__info-points-achievements-values"},$.points&&$.points>=100?o.a.createElement("span",{className:"personal-office__info-points-achievements-value"},100):null,$.points&&$.points>=250?o.a.createElement("span",{className:"personal-office__info-points-achievements-value"},250):null,$.points&&$.points>=500?o.a.createElement("span",{className:"personal-office__info-points-achievements-value"},500):null)):null)),o.a.createElement("section",{className:"personal-office__info personal-office__info_mobile "},o.a.createElement("div",{className:"personal-office__info-content-wrapper_mobile"},o.a.createElement("div",{className:"personal-office__info-section"},o.a.createElement("p",{className:"personal-office__info-name"},$.name_surname),o.a.createElement("p",{className:"personal-office__info-text"},"E-mail: \xa0",o.a.createElement("span",{className:"personal-office__info-text-content"},$.email)),o.a.createElement("p",{className:"personal-office__info-text"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: \xa0",o.a.createElement("span",{className:"personal-office__info-text-content"},$.phone)),o.a.createElement(l.b,{to:"/change_personal_data",className:"link"},o.a.createElement("button",{className:"button personal-office__info-edit"},o.a.createElement("img",{src:G.a,alt:"pencil",className:"personal-office__info-edit-image"}),"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))),o.a.createElement("section",{className:"personal-office__buttons"},o.a.createElement("div",{className:"personal-office__buttons-section "},o.a.createElement("p",{id:"personal-office__calendar",className:"personal-office__buttons-section-btn personal-office__buttons-section-btn_active",onClick:function(){var e=document.getElementsByClassName("personal-office__calendar")[0],t=document.getElementsByClassName("personal-office__stat")[0],a=document.getElementById("personal-office__stat"),n=document.getElementById("personal-office__calendar");t.style.display="none",e.style.display="block",n.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_active",a.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_non_active"}},"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c")),o.a.createElement("div",{className:"personal-office__buttons-section"},o.a.createElement("p",{id:"personal-office__stat",className:"personal-office__buttons-section-btn personal-office__buttons-section-btn_non_active",onClick:function(){var e=document.getElementsByClassName("personal-office__calendar")[0],t=document.getElementsByClassName("personal-office__stat")[0],a=document.getElementById("personal-office__stat"),n=document.getElementById("personal-office__calendar");e.style.display="none",t.style.display="block",n.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_non_active",a.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_active"}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"))),o.a.createElement("section",{className:"personal-office__calendar"},o.a.createElement(z.a,{plugins:[R.b,U.a,J.a,W.a,P.a,Y.a],height:"610px",locale:"ru",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",eventSources:[v,_],editable:!0,firstDay:1,dayMaxEventRows:!0,selectable:!0,selectMirror:!0,select:function(e){w(e.start),ie(!0)},dateClick:function(e){ie(!0)},eventDrop:re,eventResize:re,eventClick:function(e){var t=Number(e.event._def.publicId),a=_.filter((function(e){return e.id===t}));console.log("handleEventClick -> findCurrentEvent",a),a[0]||(a=v.filter((function(e){return e.id===t}))),r(a[0]),ue()},slotDuration:"00:15:00"})),o.a.createElement("section",{className:"personal-office__stat"},o.a.createElement("div",{className:"personal-office__stat-wrapper"},o.a.createElement("div",{className:"personal-office__stat-doughnut"},o.a.createElement(F.b,{data:se,width:100,height:75,options:{responsive:!0,maintainAspectRatio:!0,legend:{display:!1}}})),o.a.createElement("div",{className:"personal-office__stat-content"},o.a.createElement("div",{className:"personal-office__stat-buttons"},o.a.createElement("div",{className:"personal-office__stat-buttons-content"},o.a.createElement("input",{type:"button",value:"\u041d\u0435\u0434\u0435\u043b\u044f",onClick:function(){return L("week")},className:"week"===H?"button personal-office__stat-button personal-office__stat-button_active":"button personal-office__stat-button"}),o.a.createElement("input",{type:"button",value:"\u041c\u0435\u0441\u044f\u0446",onClick:function(){return L("month")},className:"month"===H?"button personal-office__stat-button personal-office__stat-button_active":"button personal-office__stat-button"}),o.a.createElement("input",{type:"button",value:"\u0413\u043e\u0434",onClick:function(){return L("year")},className:"year"===H?"button personal-office__stat-button personal-office__stat-button_active":"button personal-office__stat-button"}))),o.a.createElement("div",{className:"personal-office__stat-info"},o.a.createElement("div",{className:"personal-office__stat-info-content"},o.a.createElement("div",{className:"personal-office__stat-info-block"},o.a.createElement("img",{className:"personal-office__stat-info-block-img",src:x.a,alt:"personal stat logo"}),o.a.createElement("p",{className:"personal-office__stat-info-block-text"},"\u0412\u0441\u0435\u0433\u043e"),o.a.createElement("p",{style:{color:"#1070CA"},className:"personal-office__stat-info-block-number"},K.quantity_of_polls)),o.a.createElement("div",{className:"personal-office__stat-info-block"},o.a.createElement("img",{className:"personal-office__stat-info-block-img",src:S.a,alt:"personal stat logo"}),o.a.createElement("p",{className:"personal-office__stat-info-block-text"},"\u041f\u043e\u0441\u0435\u0449\u0435\u043d\u043e"),o.a.createElement("p",{style:{color:"#F7D154"},className:"personal-office__stat-info-block-number"},K.quantity_of_attended_events)),o.a.createElement("div",{className:"personal-office__stat-info-block"},o.a.createElement("img",{className:"personal-office__stat-info-block-img personal-office__stat-info-block-img_small",src:D.a,alt:"personal stat logo"}),o.a.createElement("p",{className:"personal-office__stat-info-block-text"},"\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e"),o.a.createElement("p",{style:{color:"#EC4C47"},className:"personal-office__stat-info-block-number"},K.quantity_of_missed_events))))))),ke&&o.a.createElement(y.a,{type:Ee,text:ye,onClose:function(){xe(!ke)}}))),pe&&o.a.createElement(h,{OpenAlert:we,onClose:ue,event:i}),le&&o.a.createElement(g,{onClose:function(){ie(!le),de()},updateEvents:de,date:k,OpenAlert:we}))}))}}]);
//# sourceMappingURL=7.cdf9d915.chunk.js.map