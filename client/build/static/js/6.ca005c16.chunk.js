(this.webpackJsonpneobis_time=this.webpackJsonpneobis_time||[]).push([[6],{279:function(e,t,a){e.exports=a.p+"static/media/all_events.4121eeec.svg"},280:function(e,t,a){e.exports=a.p+"static/media/comed_events.1f152545.svg"},281:function(e,t,a){e.exports=a.p+"static/media/missed_events.6c6faf4d.svg"},282:function(e,t,a){e.exports=a.p+"static/media/personal_achievment_1.b3f45b02.svg"},283:function(e,t,a){e.exports=a.p+"static/media/personal_achievment_2.df06140c.svg"},284:function(e,t,a){e.exports=a.p+"static/media/personal_achievment_3.b0eaf699.svg"},285:function(e,t,a){e.exports=a.p+"static/media/edit_pencil_neobis_color.c80f9e1b.svg"},316:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(1),c=a.n(s),o=a(41),l=a(5),i=a(15),r=a.n(i),m=a(19),f=a(39),p=a(7),_=a(57),u=a.n(_),d=(a(79),a(60)),b=a(58),v=a.n(b),E=a(59),N=a.n(E),g=function(e){var t=Object(s.useState)(""),a=Object(n.a)(t,2),o=a[0],l=a[1],i=Object(s.useState)(""),_=Object(n.a)(i,2),b=_[0],E=_[1],g=Object(s.useState)(e.date),h=Object(n.a)(g,2),y=h[0],O=h[1],j=Object(s.useState)(0),C=Object(n.a)(j,2),k=C[0],x=C[1],w=Object(s.useState)(0),S=Object(n.a)(w,2),M=S[0],D=S[1],B=Object(s.useState)(e.date),q=Object(n.a)(B,2),H=q[0],I=q[1],T=Object(s.useState)(0),A=Object(n.a)(T,2),G=A[0],F=A[1],L=Object(s.useState)(0),z=Object(n.a)(L,2),R=z[0],J=z[1];var W=function(){var e=new Date(y);return e.setHours(k,M,0),"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate(),"T").concat(e.getHours(),":").concat(e.getMinutes())},Y=function(){var e=new Date(H);return e.setHours(G,R,0),"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate(),"T").concat(e.getHours(),":").concat(e.getMinutes())};function P(){return(P=Object(m.a)(r.a.mark((function t(a){var n,s,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,W();case 3:return n=t.sent,t.next=6,Y();case 6:s=t.sent,c={title:o,description:b,start:n,end:s},p.a.postNoteCreateData(c).then((function(t){e.OpenAlert(t)})).catch((function(t){e.OpenAlert(t.request)}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return c.a.createElement("div",{className:"modal_centered"},c.a.createElement("div",{className:"modal__wrapper"},c.a.createElement(f.a,{onClose:e.onClose}),c.a.createElement("div",{className:"personal-create"},c.a.createElement("div",{className:"personal-create-row"},c.a.createElement("input",{className:"personal-create__input",type:"text",name:"name",required:!0,value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){l(e.target.value)}})),c.a.createElement("div",{className:"admin-create-event-modal-row"},c.a.createElement("img",{src:v.a,className:"admin-create-event-modal-icon",alt:"time"}),c.a.createElement("div",{className:"admin-create-event-modal__day-picker"},c.a.createElement(u.a,{value:e.date,onDayChange:function(e){O(e),I(e)},format:"dd/MM",formatDate:function(e,t,a){return Object(d.a)(e,t,{locale:a})}})),c.a.createElement("div",{className:"admin-create-event-modal-time"},c.a.createElement("input",{type:"text",name:"",placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){x(parseInt(e.target.value))}}),c.a.createElement("div",{className:"admin-create-event-modal__time-picker-colon"},"."),c.a.createElement("input",{type:"text",name:"",placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){D(parseInt(e.target.value))}}),"\xa0-\xa0",c.a.createElement("input",{type:"text",name:"",placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){F(parseInt(e.target.value))}}),c.a.createElement("div",{className:"admin-create-event-modal__time-picker-colon"},"."),c.a.createElement("input",{type:"text",name:"",placeholder:"00",className:"admin-create-event-modal__time-picker",onChange:function(e){J(parseInt(e.target.value))}}))),c.a.createElement("div",{className:"personal-create-row"},c.a.createElement("div",{className:"personal-create__textarea-wrapper"},c.a.createElement("img",{src:N.a,className:"admin-create-event-modal-icon",alt:"people"}),c.a.createElement("input",{name:"description",required:!0,value:b,onChange:function(e){E(e.target.value)},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",className:"personal-create__textarea"}))),c.a.createElement("div",{className:"personal-create-row event-info-modal__admin-buttons-wrapper"},c.a.createElement("div",{className:"personal-create__buttons-wrapper"},c.a.createElement("button",{onClick:function(e){return P.apply(this,arguments)},className:"personal-create__buttons-save button"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),c.a.createElement("button",{onClick:e.onClose,className:"personal-create__buttons-cancel button"},"\u043e\u0442\u043c\u0435\u043d\u0430"))))))},h=function(e){var t=e.event,a=new Date(t.start);return c.a.createElement("div",{className:"modal_centered"},c.a.createElement("div",{className:"modal__wrapper"},c.a.createElement("div",{className:"event-info-modal"},c.a.createElement(f.a,{onClose:e.onClose}),c.a.createElement("div",{className:"event-info__content",style:{width:"90%"}},c.a.createElement("p",{className:"event-info__content-title",style:{fontSize:"24px"}},t.title),c.a.createElement("p",{className:"event-info__content-date",style:{fontSize:"14px"}},(a.getHours()<10?"0":"")+a.getHours(),".",(a.getMinutes()<10?"0":"")+a.getMinutes()," ",["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][a.getDay()],", ",["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","C\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][a.getMonth()]," ",a.getDate()),c.a.createElement("p",{className:"event-info__content-description",style:{fontSize:"18px"}},t.description),c.a.createElement("button",{onClick:function(){p.a.deleteNote(t.id).then((function(t){e.OpenAlert(t)})).catch((function(t){e.OpenAlert(t.request)}))},className:"personal-create__buttons-delete button"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))))},y=a(37),O=a(17),j=a(24),C=a.n(j),k=a(279),x=a.n(k),w=a(280),S=a.n(w),M=a(281),D=a.n(M),B=a(282),q=a.n(B),H=a(283),I=a.n(H),T=a(284),A=a.n(T),G=a(285),F=a.n(G),L=a(156),z=a(61),R=a(52),J=a(25),W=a(53),Y=a(54),P=a(55),U=a(56),V=a(14);t.default=Object(V.a)((function(e){var t=Object(s.useState)({}),a=Object(n.a)(t,2),i=a[0],r=a[1],m=Object(s.useState)([]),f=Object(n.a)(m,2),_=f[0],u=f[1],d=Object(s.useState)(new Date),b=Object(n.a)(d,2),v=b[0],E=b[1],N=Object(s.useState)("week"),j=Object(n.a)(N,2),k=j[0],w=j[1],M=Object(s.useState)([]),B=Object(n.a)(M,2),H=B[0],T=B[1],G=Object(s.useState)({}),V=Object(n.a)(G,2),K=V[0],Q=V[1],X=Object(s.useState)({}),Z=Object(n.a)(X,2),$=(Z[0],Z[1]);Object(s.useEffect)((function(){p.a.getPersonalStats(k).then((function(e){T(e.data)}))}),[k]),Object(s.useEffect)((function(){p.a.getUserInfo().then((function(t){Q(t.data);var a=e.departments.filter((function(e){return+e.value===+t.data.department_id}));$(a[0])})),document.getElementsByClassName("fc-today-button")[0].innerHTML="\u0421\u0435\u0433\u043e\u0434\u043d\u044f",document.getElementsByClassName("fc-dayGridMonth-button")[0].innerHTML="\u041c\u0435\u0441\u044f\u0446",document.getElementsByClassName("fc-timeGridWeek-button")[0].innerHTML="\u041d\u0435\u0434\u0435\u043b\u044f",document.getElementsByClassName("fc-timeGridDay-button")[0].innerHTML="\u0414\u0435\u043d\u044c",document.getElementsByClassName("fc-listMonth-button")[0].innerHTML="\u041b\u0438\u0441\u0442"}),[]),Object(s.useEffect)((function(){document.getElementsByClassName("personal-office__stat")[0].style.display="none"}),[]);var ee={datasets:[{data:[H.quantity_of_attended_events||0,0==H.quantity_of_missed_events?0:H.quantity_of_missed_events,0==H.quantity_of_missed_events&&0==H.quantity_of_attended_events?1:0],backgroundColor:["#FFCE56","#EC4C47","grey"]}],labels:["\u041f\u043e\u0441\u0435\u0449\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439","\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439","\u043f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u043e"],legend:{display:!1},options:{legend:{display:!1}}};Object(s.useEffect)((function(){p.a.getNotes().then((function(e){u(e.data)}))}),[]);var te=Object(s.useState)(!1),ae=Object(n.a)(te,2),ne=ae[0],se=ae[1],ce=function(e){E(e.start),se(!0)},oe=function(e){var t=_.find((function(t){return t.id===Number(e.oldEvent._def.publicId)}))||{id:"",start:"",end:""};t.start=e.event.startStr,t.end=e.event.endStr;var a={start:t.start,end:t.end};p.a.patchNoteChangeData(a,t.id).then((function(e){Ce(e)})).catch((function(e){Ce(e.request)}))},le=Object(s.useState)(!1),ie=Object(n.a)(le,2),re=ie[0],me=ie[1],fe=function(){me(!re),pe()},pe=function(){p.a.getNotes().then((function(e){u(e.data)}))},_e=Object(s.useState)("success"),ue=Object(n.a)(_e,2),de=ue[0],be=ue[1],ve=Object(s.useState)(""),Ee=Object(n.a)(ve,2),Ne=Ee[0],ge=Ee[1],he=Object(s.useState)(!1),ye=Object(n.a)(he,2),Oe=ye[0],je=ye[1],Ce=function(e){e.status>=200&&e.status<=299?(be("success"),ge("\u0412\u0441\u0435 \u043f\u0440\u043e\u0448\u043b\u043e \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a")):(be("error"),ge(e.response||"\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430")),je(!0),setTimeout((function(){je(!1)}),5e3)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"wrapper"},c.a.createElement(o.a,null),c.a.createElement("div",{className:" content__wrapper content__wrapper_no_margin personal-office"},c.a.createElement(O.a,{timeOut:600}),c.a.createElement("section",{className:"personal-office__info"},c.a.createElement("div",{className:"personal-office__info-picture-block"},c.a.createElement("img",{className:"personal-office__info-avatar",src:K.profile_img||C.a,alt:"personal"})),c.a.createElement("div",{className:"personal-office__info-content-wrapper"},c.a.createElement("div",{className:"personal-office__info-section"},c.a.createElement("p",{className:"personal-office__info-name"},K.name_surname),c.a.createElement("p",{className:"personal-office__info-text"},"E-mail: \xa0",c.a.createElement("span",{className:"personal-office__info-text-content"},K.email)),c.a.createElement("p",{className:"personal-office__info-text"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: \xa0",c.a.createElement("span",{className:"personal-office__info-text-content"},K.phone)),c.a.createElement(l.b,{to:"/change_personal_data",className:"link"},c.a.createElement("button",{className:"button personal-office__info-edit"},c.a.createElement("img",{src:F.a,alt:"pencil",className:"personal-office__info-edit-image"}),"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))),c.a.createElement("div",{className:"personal-office__info-points"},c.a.createElement("div",{className:"personal-office__info-points-container"},c.a.createElement("p",{className:"personal-office__info-points-value"},K.points)),K.points&&K.points>=100?c.a.createElement("div",{className:"personal-office__info-points-achievements"},c.a.createElement("div",{className:"personal-office__info-points-achievements-images"},K.points&&K.points>=100?c.a.createElement("img",{className:"personal-office__info-points-achievements-image",src:q.a,alt:"achievement"}):null,K.points&&K.points>=250?c.a.createElement("img",{className:"personal-office__info-points-achievements-image",src:I.a,alt:"achievement"}):null,K.points&&K.points>=500?c.a.createElement("img",{className:"personal-office__info-points-achievements-image",src:A.a,alt:"achievement"}):null),c.a.createElement("div",{className:"personal-office__info-points-achievements-values"},K.points&&K.points>=100?c.a.createElement("span",{className:"personal-office__info-points-achievements-value"},100):null,K.points&&K.points>=250?c.a.createElement("span",{className:"personal-office__info-points-achievements-value"},250):null,K.points&&K.points>=500?c.a.createElement("span",{className:"personal-office__info-points-achievements-value"},500):null)):null)),c.a.createElement("section",{className:"personal-office__info personal-office__info_mobile "},c.a.createElement("div",{className:"personal-office__info-content-wrapper_mobile"},c.a.createElement("div",{className:"personal-office__info-section"},c.a.createElement("p",{className:"personal-office__info-name"},K.name_surname),c.a.createElement("p",{className:"personal-office__info-text"},"E-mail: \xa0",c.a.createElement("span",{className:"personal-office__info-text-content"},K.email)),c.a.createElement("p",{className:"personal-office__info-text"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: \xa0",c.a.createElement("span",{className:"personal-office__info-text-content"},K.phone)),c.a.createElement(l.b,{to:"/change_personal_data",className:"link"},c.a.createElement("button",{className:"button personal-office__info-edit"},c.a.createElement("img",{src:F.a,alt:"pencil",className:"personal-office__info-edit-image"}),"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))),c.a.createElement("section",{className:"personal-office__buttons"},c.a.createElement("div",{className:"personal-office__buttons-section "},c.a.createElement("p",{id:"personal-office__calendar",className:"personal-office__buttons-section-btn personal-office__buttons-section-btn_active",onClick:function(){var e=document.getElementsByClassName("personal-office__calendar")[0],t=document.getElementsByClassName("personal-office__stat")[0],a=document.getElementById("personal-office__stat"),n=document.getElementById("personal-office__calendar");t.style.display="none",e.style.display="block",n.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_active",a.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_non_active"}},"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c")),c.a.createElement("div",{className:"personal-office__buttons-section"},c.a.createElement("p",{id:"personal-office__stat",className:"personal-office__buttons-section-btn personal-office__buttons-section-btn_non_active",onClick:function(){var e=document.getElementsByClassName("personal-office__calendar")[0],t=document.getElementsByClassName("personal-office__stat")[0],a=document.getElementById("personal-office__stat"),n=document.getElementById("personal-office__calendar");e.style.display="none",t.style.display="block",n.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_non_active",a.className="personal-office__buttons-section-btn personal-office__buttons-section-btn_active"}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"))),c.a.createElement("section",{className:"personal-office__calendar"},c.a.createElement(z.a,{plugins:[J.b,U.a,W.a,Y.a,R.a,P.a],height:"610px",locale:"ru",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",events:_,editable:!0,firstDay:1,dayMaxEventRows:!0,selectable:!0,selectMirror:!0,select:ce,dateClick:ce,eventDrop:oe,eventResize:oe,eventClick:function(e){var t=Number(e.event._def.publicId),a=_.filter((function(e){return e.id===t}));r(a[0]),fe()},slotDuration:"00:15:00"})),c.a.createElement("section",{className:"personal-office__stat"},c.a.createElement("div",{className:"personal-office__stat-wrapper"},c.a.createElement("div",{className:"personal-office__stat-doughnut"},c.a.createElement(L.b,{data:ee,width:100,height:75,options:{responsive:!0,maintainAspectRatio:!0,legend:{display:!1}}})),c.a.createElement("div",{className:"personal-office__stat-content"},c.a.createElement("div",{className:"personal-office__stat-buttons"},c.a.createElement("div",{className:"personal-office__stat-buttons-content"},c.a.createElement("input",{type:"button",value:"\u041d\u0435\u0434\u0435\u043b\u044f",onClick:function(){return w("week")},className:"week"===k?"button personal-office__stat-button personal-office__stat-button_active":"button personal-office__stat-button"}),c.a.createElement("input",{type:"button",value:"\u041c\u0435\u0441\u044f\u0446",onClick:function(){return w("month")},className:"month"===k?"button personal-office__stat-button personal-office__stat-button_active":"button personal-office__stat-button"}),c.a.createElement("input",{type:"button",value:"\u0413\u043e\u0434",onClick:function(){return w("year")},className:"year"===k?"button personal-office__stat-button personal-office__stat-button_active":"button personal-office__stat-button"}))),c.a.createElement("div",{className:"personal-office__stat-info"},c.a.createElement("div",{className:"personal-office__stat-info-content"},c.a.createElement("div",{className:"personal-office__stat-info-block"},c.a.createElement("img",{className:"personal-office__stat-info-block-img",src:x.a,alt:"personal stat logo"}),c.a.createElement("p",{className:"personal-office__stat-info-block-text"},"\u0412\u0441\u0435\u0433\u043e"),c.a.createElement("p",{style:{color:"#1070CA"},className:"personal-office__stat-info-block-number"},H.quantity_of_polls)),c.a.createElement("div",{className:"personal-office__stat-info-block"},c.a.createElement("img",{className:"personal-office__stat-info-block-img",src:S.a,alt:"personal stat logo"}),c.a.createElement("p",{className:"personal-office__stat-info-block-text"},"\u041f\u043e\u0441\u0435\u0449\u0435\u043d\u043e"),c.a.createElement("p",{style:{color:"#F7D154"},className:"personal-office__stat-info-block-number"},H.quantity_of_attended_events)),c.a.createElement("div",{className:"personal-office__stat-info-block"},c.a.createElement("img",{className:"personal-office__stat-info-block-img personal-office__stat-info-block-img_small",src:D.a,alt:"personal stat logo"}),c.a.createElement("p",{className:"personal-office__stat-info-block-text"},"\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e"),c.a.createElement("p",{style:{color:"#EC4C47"},className:"personal-office__stat-info-block-number"},H.quantity_of_missed_events))))))),Oe&&c.a.createElement(y.a,{type:de,text:Ne,onClose:function(){je(!Oe)}}))),re&&c.a.createElement(h,{OpenAlert:Ce,onClose:fe,event:i}),ne&&c.a.createElement(g,{onClose:function(){se(!ne),pe()},updateEvents:pe,date:v,OpenAlert:Ce}))}))}}]);
//# sourceMappingURL=6.ca005c16.chunk.js.map